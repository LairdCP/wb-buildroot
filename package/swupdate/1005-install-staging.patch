--- a/Makefile	2019-11-29 08:47:39.000000000 
+++ b/Makefile	2022-11-21 12:56:49.000000000 
@@ -203,6 +203,8 @@
 AFLAGS_KERNEL	=
 
 
+DESTSRCDIR ?= $(DESTDIR)
+
 # Use LINUXINCLUDE when you must reference the include/ directory.
 # Needed to be compatible with the O= option
 LINUXINCLUDE    := -Iinclude \
@@ -446,21 +448,15 @@
 	$(call cmd,strip)
 
 install: all
-	install -d ${DESTDIR}/usr/bin
-	install -d ${DESTDIR}/usr/include
-	install -d ${DESTDIR}/usr/lib
-	install -m 755 swupdate ${DESTDIR}/usr/bin
-	for i in ${tools-bins};do \
-		install -m 755 $$i ${DESTDIR}/usr/bin; \
-	done
-	install -m 0644 include/network_ipc.h ${DESTDIR}/usr/include
-	install -m 0644 include/swupdate_status.h ${DESTDIR}/usr/include
-	install -m 0644 include/progress_ipc.h ${DESTDIR}/usr/include
-	install -m 0755 ipc/lib.a ${DESTDIR}/usr/lib/libswupdate.a
-	if [ $(HAVE_LUA) = y ]; then \
-		install -d ${DESTDIR}/usr/lib/lua/$(LUAVER); \
-		install -m 0755 ${lua_swupdate} $(DESTDIR)/usr/lib/lua/$(LUAVER); \
-	fi
+	install -D -m 0755 -t ${DESTDIR}/usr/bin swupdate ${tools-bins}
+	install -D -m 0644 -t ${DESTSRCDIR}/usr/include \
+		include/network_ipc.h \
+		include/swupdate_status.h \
+		include/progress_ipc.h
+	install -D -m 0644 ipc/lib.a ${DESTSRCDIR}/usr/lib/libswupdate.a
+ifeq ($(HAVE_LUA),y)
+	install -D -m 0644 -t $(DESTDIR)/${LIBDIR}/lua/$(LUAVER) ${lua_swupdate}
+endif
 
 PHONY += run-tests
 tests: \