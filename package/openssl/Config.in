config BR2_PACKAGE_OPENSSL_FORCE_LIBOPENSSL
	bool

config BR2_PACKAGE_OPENSSL
	bool "openssl support"
	select BR2_PACKAGE_HAS_OPENSSL
	help
	  Select the desired ssl library provider.

if BR2_PACKAGE_OPENSSL

choice
	prompt "ssl library"
	default BR2_PACKAGE_LIBOPENSSL
	help
	  Select OpenSSL or OpenSSL-1.0.2 or OpenSSL-3.0 or LibreSSL.

config BR2_PACKAGE_LIBOPENSSL
	bool "openssl"
	select BR2_PACKAGE_ZLIB
	help
	  A collaborative effort to develop a robust, commercial-grade,
	  fully featured, and Open Source toolkit implementing the
	  Secure Sockets Layer (SSL v2/v3) and Transport Security
	  (TLS v1) as well as a full-strength general-purpose
	  cryptography library.

	  http://www.openssl.org/

	  Note: Some helper scripts need perl.

source "package/libopenssl/Config.in"

config BR2_PACKAGE_LIBOPENSSL_3_0
	bool "openssl 3.0"
	select BR2_PACKAGE_ZLIB
	help
		This is libopenssl-3.0.

source "package/libopenssl_3_0/Config.in"


config BR2_PACKAGE_LIBOPENSSL_1_0_2
	bool "openssl 1.0.2"
	select BR2_PACKAGE_ZLIB
	help
		This is libopenssl-1.0.2, which support FIPS.

source "package/libopenssl_1_0_2/Config.in"

config BR2_PACKAGE_LAIRD_OPENSSL_FIPS_BINARIES
	bool "Laird openssl-1.0.2 (or 3.0) fips binaries"
	select BR2_PACKAGE_ZLIB
	help
		This is Laird openssl FIPS binaries (1.0.2/3.0).

source "package/lrd/laird_openssl_fips-binaries/Config.in"

config BR2_PACKAGE_LIBRESSL
	bool "libressl"
	depends on !BR2_PACKAGE_OPENSSL_FORCE_LIBOPENSSL
	depends on BR2_TOOLCHAIN_HAS_THREADS
	# uClibc doesn't provide __register_atfork() without NPTL
	depends on !BR2_TOOLCHAIN_USES_UCLIBC || BR2_TOOLCHAIN_HAS_THREADS_NPTL
	help
	  LibreSSL is a version of the TLS/crypto stack forked from
	  OpenSSL in 2014, with goals of modernizing the codebase,
	  improving security, and applying best practice development
	  processes.

	  http://www.libressl.org/

source "package/libressl/Config.in"

# openssl from br2-external trees, if any
source "$BR2_BASE_DIR/.br2-external.in.openssl"

endchoice

config BR2_PACKAGE_HAS_OPENSSL
	bool

config BR2_PACKAGE_PROVIDES_OPENSSL
	string
	default "libopenssl" if BR2_PACKAGE_LIBOPENSSL
	default "libopenssl_1_0_2"  if BR2_PACKAGE_LIBOPENSSL_1_0_2
	default "libopenssl_3_0"  if BR2_PACKAGE_LIBOPENSSL_3_0
	default "libressl" if BR2_PACKAGE_LIBRESSL
	default "laird_openssl_fips-binaries"  if BR2_PACKAGE_LAIRD_OPENSSL_FIPS_BINARIES

endif

# ensure libopenssl is used for the host variant
config BR2_PACKAGE_PROVIDES_HOST_OPENSSL
	string
	default "host-libopenssl"
